var webmonitor={_API_URL:"//web-track.go2yd.com/metric",_host:"",_page:"",_query:{},_wuid:"",_cared:{},_timing:{},_ajax:function(t){if(window.XMLHttpRequest){var n=(t=t||{}).url||"",e=t.callback,o=new XMLHttpRequest;o.open("POST"==t.method?"POST":"GET",n),"POST"==t.method?o.send(t.data):o.send(),o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<300||304==o.status){var t=o.responseText;try{t=JSON.parse(t)}catch(t){}e(t,o)}else e(o.statusText||null,o.status?"error":"abort")}}},_sendIntelligence:function(t,n,e){if(e.host=e.host||this._host,e.page=e.page||this._page,e.wuid=e.wuid||this._wuid,e.host&&e.page&&t&&"object"==typeof n&&"object"==typeof e){for(var o=1;o<=8;o++){var i="query"+o;void 0!==this._query[i]&&(e[i]=this._query[i])}var a={metric:t,timestamp:Date.now(),fields:n,tags:e};this._ajax({url:this._API_URL,method:"POST",data:JSON.stringify(a),callback:function(t){}})}},_performanceCollection:function(){function t(t){console.dir(t);for(var n in t)if(t[n]<0||t[n]>6e4)return;i._sendIntelligence("performance",t,{})}var n=window,e=null,o=-1,i=this,a=!1;n.addEventListener("load",function(){a=!0}),n.performance&&(o=setInterval(function(){console.log("trying...",a),a&&(clearInterval(o),t({domainLookup:(e=window.performance.timing).domainLookupEnd-e.domainLookupStart,tcpConnect:e.connectEnd-e.connectStart,whiteScreen:e.responseStart-e.navigationStart,firstScreen:e.domContentLoadedEventEnd-e.navigationStart,domRender:e.domComplete-e.domInteractive,domReady:e.domContentLoadedEventEnd-e.navigationStart,load:e.loadEventEnd-e.navigationStart,cssLoad:i._cared.cssLoad,jsLoad:i._cared.jsLoad}))},5e3))},_trackStart:function(t){this._timing[t+"Start"]=Date.now()},_trackEnd:function(t){this._timing[t+"End"]=Date.now(),this._cared[t+"Load"]=this._timing[t+"End"]-this._timing[t+"Start"]},init:function(t,n,e){1==arguments.length?(e={},n=t,t=location.host):2==arguments.length&&"object"==typeof n&&(e=n,n=t,t=location.host);var o=document.cookie.match(/(^|;\s*)wuid=([^;$]*)/),i=o&&o[2]||"";if(i||(i=Math.floor(1e15*Math.random())+"",document.cookie="wuid="+i+";domain="+location.hostname+";path=/;max-age=86400000"),this._host=t,this._page=n,this._query=e||{},this._wuid=i,window.addEventListener&&window.performance&&this._performanceCollection(),window.addEventListener){var a=this;window.addEventListener("error",function(t){"object"==typeof(t=t||window.event||{})&&a.sendEventLog("js error",t.message,t.filename+":"+t.lineno)})}},cssStart:function(){this._trackStart("css")},cssEnd:function(){this._trackEnd("css")},jsStart:function(){this._trackStart("js")},jsEnd:function(){this._trackEnd("js")},sendClickLog:function(t,n){},sendEventLog:function(t,n,e,o){this._sendIntelligence("event",{count:1,number:o||0},{category:t,action:n,opt_label:e||""})},sendPVLog:function(){this._sendIntelligence("pageView",{count:1},{})},sendXHRTimeCostLog:function(t,n){void 0!=t&&void 0!=n&&this._sendIntelligence("event",{count:1,number:n},{category:"xhrTimeCost",action:t,opt_label:""})}};